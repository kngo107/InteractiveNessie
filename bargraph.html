<!doctype html>
<html>
    <head>
        <title>D3 Bar graph</title>
        <script src="http://d3js.org/d3.v4.min.js"></script>
    </head>
    <body>
        <br><br><br>
    <script>
        d3.csv("test.csv", function(data) {
            var canvas = d3.select("body").append("svg")
                .attr("width", 500)
                .attr("height", 500)
            var bars = canvas.selectAll("rect")
                .data(data)
                .enter()
                .append("rect")
                .attr("width", function(d) {
                    return d.frequency * .5
                })
                .attr("height", 48)
                .attr("y", function (d, i) {
                    return i *50
                })
                .attr("fill", "blue")

            canvas.selectAll("text")
                .data(data)
                .enter()
                    .append("text")
                    .attr("fill", "black")
                    .attr("y", function(d, i) {
                        return i*50 +24
                    })
                    
                .text(function(d) {
                    return d.merchant + ", " + d.frequency
                })
            bars.transition()
                .duration(1000)
                .delay(100)
                .attr("x", function(d) {
                    return 500 - (d.frequency*.5)
                })
                .attr("width", function(d) {
                    return d.frequency*.5
                })
        })
    </script>
    </body>
</html>
